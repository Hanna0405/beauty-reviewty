rules_version = '2';
service cloud.firestore {
 match /databases/{database}/documents {
 function isSignedIn() { return request.auth != null; }
 function isOwner(userId) { return isSignedIn() && request.auth.uid == userId; }

 match /services/{docId} { allow read: if true; allow write: if false; }
 match /cities/{docId} { allow read: if true; allow write: if false; }

 match /users/{userId} {
 allow read: if true;
 allow create: if isOwner(userId);
 allow update: if isOwner(userId);
 allow delete: if false;
 }

 match /masters/{userId} {
 allow read: if true;
 allow create, update: if isOwner(userId);
 allow delete: if false;
 }

 match /listings/{listingId} {
 allow read: if true;
 allow create, update, delete: if isSignedIn()
 && request.resource.data.ownerUid == request.auth.uid;
 }

 match /reviews/{reviewId} {
 allow read: if true;
 allow create: if isSignedIn();
 allow update, delete: if isSignedIn()
 && request.auth.uid == resource.data.authorUid;
 }
 }
}